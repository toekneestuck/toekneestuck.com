// Underscore.js 1.1.7
// (c) 2011 Jeremy Ashkenas, DocumentCloud Inc.
// Underscore is freely distributable under the MIT license.
// Portions of Underscore are inspired or borrowed from Prototype,
// Oliver Steele's Functional, and John Resig's Micro-Templating.
// For all details and documentation:
// http://documentcloud.github.com/underscore
(function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=r.slice,o=r.unshift,u=i.toString,a=i.hasOwnProperty,f=r.forEach,l=r.map,c=r.reduce,h=r.reduceRight,p=r.filter,d=r.every,v=r.some,m=r.indexOf,g=r.lastIndexOf;i=Array.isArray;var y=Object.keys,b=Function.prototype.bind,w=function(e){return new N(e)};typeof module!="undefined"&&module.exports?(module.exports=w,w._=w):e._=w;w.VERSION="1.1.7";var E=w.each=w.forEach=function(e,t,r){if(e!=null)if(f&&e.forEach===f)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(i in e&&t.call(r,e[i],i,e)===n)break}else for(i in e)if(a.call(e,i)&&t.call(r,e[i],i,e)===n)break};w.map=function(e,t,n){var r=[];if(e==null)return r;if(l&&e.map===l)return e.map(t,n);E(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)});return r};w.reduce=w.foldl=w.inject=function(e,t,n,r){var i=n!==void 0;e==null&&(e=[]);if(c&&e.reduce===c)return r&&(t=w.bind(t,r)),i?e.reduce(t,n):e.reduce(t);E(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n};w.reduceRight=w.foldr=function(e,t,n,r){e==null&&(e=[]);if(h&&e.reduceRight===h)return r&&(t=w.bind(t,r)),n!==void 0?e.reduceRight(t,n):e.reduceRight(t);e=(w.isArray(e)?e.slice():w.toArray(e)).reverse();return w.reduce(e,t,n,r)};w.find=w.detect=function(e,t,n){var r;S(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0});return r};w.filter=w.select=function(e,t,n){var r=[];if(e==null)return r;if(p&&e.filter===p)return e.filter(t,n);E(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)});return r};w.reject=function(e,t,n){var r=[];if(e==null)return r;E(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)});return r};w.every=w.all=function(e,t,r){var i=!0;if(e==null)return i;if(d&&e.every===d)return e.every(t,r);E(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n});return i};var S=w.some=w.any=function(e,t,r){t=t||w.identity;var i=!1;if(e==null)return i;if(v&&e.some===v)return e.some(t,r);E(e,function(e,s,o){if(i|=t.call(r,e,s,o))return n});return!!i};w.include=w.contains=function(e,t){var n=!1;if(e==null)return n;if(m&&e.indexOf===m)return e.indexOf(t)!=-1;S(e,function(e){if(n=e===t)return!0});return n};w.invoke=function(e,t){var n=s.call(arguments,2);return w.map(e,function(e){return(t.call?t||e:e[t]).apply(e,n)})};w.pluck=function(e,t){return w.map(e,function(e){return e[t]})};w.max=function(e,t,n){if(!t&&w.isArray(e))return Math.max.apply(Math,e);var r={computed:-Infinity};E(e,function(e,i,s){i=t?t.call(n,e,i,s):e;i>=r.computed&&(r={value:e,computed:i})});return r.value};w.min=function(e,t,n){if(!t&&w.isArray(e))return Math.min.apply(Math,e);var r={computed:Infinity};E(e,function(e,i,s){i=t?t.call(n,e,i,s):e;i<r.computed&&(r={value:e,computed:i})});return r.value};w.sortBy=function(e,t,n){return w.pluck(w.map(e,function(e,r,i){return{value:e,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}),"value")};w.groupBy=function(e,t){var n={};E(e,function(e,r){var i=t(e,r);(n[i]||(n[i]=[])).push(e)});return n};w.sortedIndex=function(e,t,n){n||(n=w.identity);for(var r=0,i=e.length;r<i;){var s=r+i>>1;n(e[s])<n(t)?r=s+1:i=s}return r};w.toArray=function(e){return e?e.toArray?e.toArray():w.isArray(e)?s.call(e):w.isArguments(e)?s.call(e):w.values(e):[]};w.size=function(e){return w.toArray(e).length};w.first=w.head=function(e,t,n){return t!=null&&!n?s.call(e,0,t):e[0]};w.rest=w.tail=function(e,t,n){return s.call(e,t==null||n?1:t)};w.last=function(e){return e[e.length-1]};w.compact=function(e){return w.filter(e,function(e){return!!e})};w.flatten=function(e){return w.reduce(e,function(e,t){if(w.isArray(t))return e.concat(w.flatten(t));e[e.length]=t;return e},[])};w.without=function(e){return w.difference(e,s.call(arguments,1))};w.uniq=w.unique=function(e,t){return w.reduce(e,function(e,n,r){if(0==r||(t===!0?w.last(e)!=n:!w.include(e,n)))e[e.length]=n;return e},[])};w.union=function(){return w.uniq(w.flatten(arguments))};w.intersection=w.intersect=function(e){var t=s.call(arguments,1);return w.filter(w.uniq(e),function(e){return w.every(t,function(t){return w.indexOf(t,e)>=0})})};w.difference=function(e,t){return w.filter(e,function(e){return!w.include(t,e)})};w.zip=function(){for(var e=s.call(arguments),t=w.max(w.pluck(e,"length")),n=Array(t),r=0;r<t;r++)n[r]=w.pluck(e,""+r);return n};w.indexOf=function(e,t,n){if(e==null)return-1;var r;if(n)return n=w.sortedIndex(e,t),e[n]===t?n:-1;if(m&&e.indexOf===m)return e.indexOf(t);n=0;for(r=e.length;n<r;n++)if(e[n]===t)return n;return-1};w.lastIndexOf=function(e,t){if(e==null)return-1;if(g&&e.lastIndexOf===g)return e.lastIndexOf(t);for(var n=e.length;n--;)if(e[n]===t)return n;return-1};w.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0);n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=Array(r);i<r;)s[i++]=e,e+=n;return s};w.bind=function(e,t){if(e.bind===b&&b)return b.apply(e,s.call(arguments,1));var n=s.call(arguments,2);return function(){return e.apply(t,n.concat(s.call(arguments)))}};w.bindAll=function(e){var t=s.call(arguments,1);t.length==0&&(t=w.functions(e));E(t,function(t){e[t]=w.bind(e[t],e)});return e};w.memoize=function(e,t){var n={};t||(t=w.identity);return function(){var r=t.apply(this,arguments);return a.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}};w.delay=function(e,t){var n=s.call(arguments,2);return setTimeout(function(){return e.apply(e,n)},t)};w.defer=function(e){return w.delay.apply(w,[e,1].concat(s.call(arguments,1)))};var x=function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null;e.apply(i,s)};n&&clearTimeout(r);if(n||!r)r=setTimeout(o,t)}};w.throttle=function(e,t){return x(e,t,!1)};w.debounce=function(e,t){return x(e,t,!0)};w.once=function(e){var t=!1,n;return function(){if(t)return n;t=!0;return n=e.apply(this,arguments)}};w.wrap=function(e,t){return function(){var n=[e].concat(s.call(arguments));return t.apply(this,n)}};w.compose=function(){var e=s.call(arguments);return function(){for(var t=s.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}};w.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}};w.keys=y||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[],n;for(n in e)a.call(e,n)&&(t[t.length]=n);return t};w.values=function(e){return w.map(e,w.identity)};w.functions=w.methods=function(e){var t=[],n;for(n in e)w.isFunction(e[n])&&t.push(n);return t.sort()};w.extend=function(e){E(s.call(arguments,1),function(t){for(var n in t)t[n]!==void 0&&(e[n]=t[n])});return e};w.defaults=function(e){E(s.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])});return e};w.clone=function(e){return w.isArray(e)?e.slice():w.extend({},e)};w.tap=function(e,t){t(e);return e};w.isEqual=function(e,t){if(e===t)return!0;var n=typeof e;if(n!=typeof t)return!1;if(e==t)return!0;if(!e&&t||e&&!t)return!1;e._chain&&(e=e._wrapped);t._chain&&(t=t._wrapped);if(e.isEqual)return e.isEqual(t);if(t.isEqual)return t.isEqual(e);if(w.isDate(e)&&w.isDate(t))return e.getTime()===t.getTime();if(w.isNaN(e)&&w.isNaN(t))return!1;if(w.isRegExp(e)&&w.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline;if(n!=="object")return!1;if(e.length&&e.length!==t.length)return!1;n=w.keys(e);var r=w.keys(t);if(n.length!=r.length)return!1;for(var i in e)if(!(i in t)||!w.isEqual(e[i],t[i]))return!1;return!0};w.isEmpty=function(e){if(w.isArray(e)||w.isString(e))return e.length===0;for(var t in e)if(a.call(e,t))return!1;return!0};w.isElement=function(e){return!!e&&e.nodeType==1};w.isArray=i||function(e){return u.call(e)==="[object Array]"};w.isObject=function(e){return e===Object(e)};w.isArguments=function(e){return!!e&&!!a.call(e,"callee")};w.isFunction=function(e){return!(!e||!e.constructor||!e.call||!e.apply)};w.isString=function(e){return!!(e===""||e&&e.charCodeAt&&e.substr)};w.isNumber=function(e){return!!(e===0||e&&e.toExponential&&e.toFixed)};w.isNaN=function(e){return e!==e};w.isBoolean=function(e){return e===!0||e===!1};w.isDate=function(e){return!(!e||!e.getTimezoneOffset||!e.setUTCFullYear)};w.isRegExp=function(e){return!(!e||!e.test||!e.exec||!e.ignoreCase&&e.ignoreCase!==!1)};w.isNull=function(e){return e===null};w.isUndefined=function(e){return e===void 0};w.noConflict=function(){e._=t;return this};w.identity=function(e){return e};w.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)};w.mixin=function(e){E(w.functions(e),function(t){k(t,w[t]=e[t])})};var T=0;w.uniqueId=function(e){var t=T++;return e?e+t:t};w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};w.template=function(e,t){var n=w.templateSettings;n="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(n.interpolate,function(e,t){return"',"+t.replace(/\\'/g,"'")+",'"}).replace(n.evaluate||null,function(e,t){return"');"+t.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";n=new Function("obj",n);return t?n(t):n};var N=function(e){this._wrapped=e};w.prototype=N.prototype;var C=function(e,t){return t?w(e).chain():e},k=function(e,t){N.prototype[e]=function(){var e=s.call(arguments);o.call(e,this._wrapped);return C(t.apply(w,e),this._chain)}};w.mixin(w);E(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];N.prototype[e]=function(){t.apply(this._wrapped,arguments);return C(this._wrapped,this._chain)}});E(["concat","join","slice"],function(e){var t=r[e];N.prototype[e]=function(){return C(t.apply(this._wrapped,arguments),this._chain)}});N.prototype.chain=function(){this._chain=!0;return this};N.prototype.value=function(){return this._wrapped}})();!function(e){"use strict";function r(e,t,n){return typeof e=="function"?e.apply(t,n):e}var t;e(document).ready(function(){e.support.transition=function(){var e=document.body||document.documentElement,t=e.style,n=t.transition!==undefined||t.WebkitTransition!==undefined||t.MozTransition!==undefined||t.MsTransition!==undefined||t.OTransition!==undefined;return n}();if(e.support.transition){t="TransitionEnd";e.browser.webkit?t="webkitTransitionEnd":e.browser.mozilla?t="transitionend":e.browser.opera&&(t="oTransitionEnd")}});var n=function(t,n){this.$element=e(t);this.options=n;this.enabled=!0;this.fixTitle()};n.prototype={show:function(){var t,n,i,s,o,u;if(this.hasContent()&&this.enabled){o=this.tip();this.setContent();this.options.animate&&o.addClass("fade");o.remove().css({top:0,left:0,display:"block"}).prependTo(document.body);t=e.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight});n=o[0].offsetWidth;i=o[0].offsetHeight;s=r(this.options.placement,this,[o[0],this.$element[0]]);switch(s){case"below":u={top:t.top+t.height+this.options.offset,left:t.left+t.width/2-n/2};break;case"above":u={top:t.top-i-this.options.offset,left:t.left+t.width/2-n/2};break;case"left":u={top:t.top+t.height/2-i/2,left:t.left-n-this.options.offset};break;case"right":u={top:t.top+t.height/2-i/2,left:t.left+t.width+this.options.offset}}o.css(u).addClass(s).addClass("in")}},setContent:function(){var e=this.tip();e.find(".twipsy-inner")[this.options.html?"html":"text"](this.getTitle());e[0].className="twipsy"},hide:function(){function i(){r.remove()}var n=this,r=this.tip();r.removeClass("in");e.support.transition&&this.$tip.hasClass("fade")?r.bind(t,i):i()},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getTitle:function(){var e,t=this.$element,n=this.options;this.fixTitle();typeof n.title=="string"?e=t.attr(n.title=="title"?"data-original-title":n.title):typeof n.title=="function"&&(e=n.title.call(t[0]));e=(""+e).replace(/(^\s*|\s*$)/,"");return e||n.fallback},tip:function(){return this.$tip=this.$tip||e('<div class="twipsy" />').html(this.options.template)},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}};e.fn.twipsy=function(t){e.fn.twipsy.initWith.call(this,t,n,"twipsy");return this};e.fn.twipsy.initWith=function(t,n,r){function a(i){var s=e.data(i,r);if(!s){s=new n(i,e.fn.twipsy.elementOptions(i,t));e.data(i,r,s)}return s}function f(){var e=a(this);e.hoverState="in";if(t.delayIn==0)e.show();else{e.fixTitle();setTimeout(function(){e.hoverState=="in"&&e.show()},t.delayIn)}}function l(){var e=a(this);e.hoverState="out";t.delayOut==0?e.hide():setTimeout(function(){e.hoverState=="out"&&e.hide()},t.delayOut)}var i,s,o,u;if(t===!0)return this.data(r);if(typeof t=="string"){i=this.data(r);i&&i[t]();return this}t=e.extend({},e.fn[r].defaults,t);t.live||this.each(function(){a(this)});if(t.trigger!="manual"){s=t.live?"live":"bind";o=t.trigger=="hover"?"mouseenter":"focus";u=t.trigger=="hover"?"mouseleave":"blur";this[s](o,f)[s](u,l)}return this};e.fn.twipsy.Twipsy=n;e.fn.twipsy.defaults={animate:!0,delayIn:0,delayOut:0,fallback:"",placement:"above",html:!1,live:!1,offset:0,title:"title",trigger:"hover",template:'<div class="twipsy-arrow"></div><div class="twipsy-inner"></div>'};e.fn.twipsy.rejectAttrOptions=["title"];e.fn.twipsy.elementOptions=function(t,n){var r=e(t).data(),i=e.fn.twipsy.rejectAttrOptions,s=i.length;while(s--)delete r[i[s]];return e.extend({},n,r)}}(window.jQuery||window.ender);(function(e){e.fn.hoverIntent=function(t,n){var r={sensitivity:7,interval:100,timeout:0};r=e.extend(r,n?{over:t,out:n}:t);var i,s,o,u,a=function(e){i=e.pageX;s=e.pageY},f=function(t,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);if(Math.abs(o-i)+Math.abs(u-s)<r.sensitivity){e(n).unbind("mousemove",a);n.hoverIntent_s=1;return r.over.apply(n,[t])}o=i;u=s;n.hoverIntent_t=setTimeout(function(){f(t,n)},r.interval)},l=function(e,t){t.hoverIntent_t=clearTimeout(t.hoverIntent_t);t.hoverIntent_s=0;return r.out.apply(t,[e])},c=function(t){var n=jQuery.extend({},t),i=this;i.hoverIntent_t&&(i.hoverIntent_t=clearTimeout(i.hoverIntent_t));if(t.type=="mouseenter"){o=n.pageX;u=n.pageY;e(i).bind("mousemove",a);i.hoverIntent_s!=1&&(i.hoverIntent_t=setTimeout(function(){f(n,i)},r.interval))}else{e(i).unbind("mousemove",a);i.hoverIntent_s==1&&(i.hoverIntent_t=setTimeout(function(){l(n,i)},r.timeout))}};return this.bind("mouseenter",c).bind("mouseleave",c)}})(jQuery);(function(e,t){var n=e.History=e.History||{},r=e.jQuery;if(typeof n.Adapter!="undefined")throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){r(e).bind(t,n)},trigger:function(e,t){r(e).trigger(t)},onDomLoad:function(e){r(e)}};typeof n.init!="undefined"&&n.init()})(window);(function(e,t){"use strict";var n=e.console||t,r=e.document,i=e.navigator,s=e.amplify||!1,o=e.setTimeout,u=e.clearTimeout,a=e.setInterval,f=e.JSON,l=e.History=e.History||{},c=e.history;f.stringify=f.stringify||f.encode,f.parse=f.parse||f.decode;if(typeof l.init!="undefined")throw new Error("History.js Core has already been loaded...");l.init=function(){if(typeof l.Adapter=="undefined")return!1;typeof l.initCore!="undefined"&&l.initCore(),typeof l.initHtml4!="undefined"&&l.initHtml4();return!0},l.initCore=function(){if(typeof l.initCore.initialized!="undefined")return!1;l.initCore.initialized=!0,l.options=l.options||{},l.options.hashChangeInterval=l.options.hashChangeInterval||100,l.options.safariPollInterval=l.options.safariPollInterval||500,l.options.doubleCheckInterval=l.options.doubleCheckInterval||500,l.options.storeInterval=l.options.storeInterval||1e3,l.options.busyDelay=l.options.busyDelay||250,l.options.debug=l.options.debug||!1,l.options.initialTitle=l.options.initialTitle||r.title,l.debug=function(){(l.options.debug||!1)&&l.log.apply(l,arguments)},l.log=function(){var e=typeof n!="undefined"&&typeof n.log!="undefined"&&typeof n.log.apply!="undefined",t=r.getElementById("log"),i,s,o;if(e){var u=Array.prototype.slice.call(arguments);i=u.shift(),typeof n.debug!="undefined"?n.debug.apply(n,[i,u]):n.log.apply(n,[i,u])}else i="\n"+arguments[0]+"\n";for(s=1,o=arguments.length;s<o;++s){var a=arguments[s];if(typeof a=="object"&&typeof f!="undefined")try{a=f.stringify(a)}catch(l){}i+="\n"+a+"\n"}t?(t.value+=i+"\n-----\n",t.scrollTop=t.scrollHeight-t.clientHeight):e||alert(i);return!0},l.getInternetExplorerMajorVersion=function(){var e=l.getInternetExplorerMajorVersion.cached=typeof l.getInternetExplorerMajorVersion.cached!="undefined"?l.getInternetExplorerMajorVersion.cached:function(){var e=3,t=r.createElement("div"),n=t.getElementsByTagName("i");while((t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&n[0]);return e>4?e:!1}();return e},l.isInternetExplorer=function(){var e=l.isInternetExplorer.cached=typeof l.isInternetExplorer.cached!="undefined"?l.isInternetExplorer.cached:Boolean(l.getInternetExplorerMajorVersion());return e},l.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(i.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(i.userAgent)),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in r)||l.isInternetExplorer()&&l.getInternetExplorerMajorVersion()<8)},l.enabled=!l.emulated.pushState,l.bugs={setHash:Boolean(!l.emulated.pushState&&i.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),safariPoll:Boolean(!l.emulated.pushState&&i.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),ieDoubleCheck:Boolean(l.isInternetExplorer()&&l.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(l.isInternetExplorer()&&l.getInternetExplorerMajorVersion()<7)},l.isEmptyObject=function(e){for(var t in e)return!1;return!0},l.cloneObject=function(e){var t,n;e?(t=f.stringify(e),n=f.parse(t)):n={};return n},l.getRootUrl=function(){var e=r.location.protocol+"//"+(r.location.hostname||r.location.host);if(r.location.port||!1)e+=":"+r.location.port;e+="/";return e},l.getBaseHref=function(){var e=r.getElementsByTagName("base"),t=null,n="";e.length===1&&(t=e[0],n=t.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/");return n},l.getBaseUrl=function(){var e=l.getBaseHref()||l.getBasePageUrl()||l.getRootUrl();return e},l.getPageUrl=function(){var e=l.getState(!1,!1),t=(e||{}).url||r.location.href,n=t.replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+"/"});return n},l.getBasePageUrl=function(){var e=r.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/";return e},l.getFullUrl=function(e,t){var n=e,r=e.substring(0,1);t=typeof t=="undefined"?!0:t,/[a-z]+\:\/\//.test(e)||(r==="/"?n=l.getRootUrl()+e.replace(/^\/+/,""):r==="#"?n=l.getPageUrl().replace(/#.*/,"")+e:r==="?"?n=l.getPageUrl().replace(/[\?#].*/,"")+e:t?n=l.getBaseUrl()+e.replace(/^(\.\/)+/,""):n=l.getBasePageUrl()+e.replace(/^(\.\/)+/,""));return n.replace(/\#$/,"")},l.getShortUrl=function(e){var t=e,n=l.getBaseUrl(),r=l.getRootUrl();l.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(r,"/"),l.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"");return t},l.store=s?s.store("History.store")||{}:{},l.store.idToState=l.store.idToState||{},l.store.urlToId=l.store.urlToId||{},l.store.stateToId=l.store.stateToId||{},l.idToState=l.idToState||{},l.stateToId=l.stateToId||{},l.urlToId=l.urlToId||{},l.storedStates=l.storedStates||[],l.savedStates=l.savedStates||[],l.getState=function(e,t){typeof e=="undefined"&&(e=!0),typeof t=="undefined"&&(t=!0);var n=l.getLastSavedState();!n&&t&&(n=l.createStateObject()),e&&(n=l.cloneObject(n),n.url=n.cleanUrl||n.url);return n},l.getIdByState=function(e){var t=l.extractId(e.url);if(!t){var n=l.getStateString(e);if(typeof l.stateToId[n]!="undefined")t=l.stateToId[n];else if(typeof l.store.stateToId[n]!="undefined")t=l.store.stateToId[n];else{for(;;){t=String(Math.floor(Math.random()*1e3));if(typeof l.idToState[t]=="undefined"&&typeof l.store.idToState[t]=="undefined")break}l.stateToId[n]=t,l.idToState[t]=e}}return t},l.normalizeState=function(e){if(!e||typeof e!="object")e={};if(typeof e.normalized!="undefined")return e;if(!e.data||typeof e.data!="object")e.data={};var t={};t.normalized=!0,t.title=e.title||"",t.url=l.getFullUrl(l.unescapeString(e.url||r.location.href)),t.hash=l.getShortUrl(t.url),t.data=l.cloneObject(e.data),t.id=l.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl;var n=!l.isEmptyObject(t.data);if(t.title||n)t.hash=l.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id;t.hashedUrl=l.getFullUrl(t.hash),(l.emulated.pushState||l.bugs.safariPoll)&&l.hasUrlDuplicate(t)&&(t.url=t.hashedUrl);return t},l.createStateObject=function(e,t,n){var r={data:e,title:t,url:n};r=l.normalizeState(r);return r},l.getStateById=function(e){e=String(e);var n=l.idToState[e]||l.store.idToState[e]||t;return n},l.getStateString=function(e){var t=l.normalizeState(e),n={data:t.data,title:e.title,url:e.url},r=f.stringify(n);return r},l.getStateId=function(e){var t=l.normalizeState(e),n=t.id;return n},l.getHashByState=function(e){var t,n=l.normalizeState(e);t=n.hash;return t},l.extractId=function(e){var t,n,r;n=/(.*)\&_suid=([0-9]+)$/.exec(e),r=n?n[1]||e:e,t=n?String(n[2]||""):"";return t||!1},l.isTraditionalAnchor=function(e){var t=!/[\/\?\.]/.test(e);return t},l.extractState=function(e,t){var n=null;t=t||!1;var r=l.extractId(e);r&&(n=l.getStateById(r));if(!n){var i=l.getFullUrl(e);r=l.getIdByUrl(i)||!1,r&&(n=l.getStateById(r)),!n&&t&&!l.isTraditionalAnchor(e)&&(n=l.createStateObject(null,null,i))}return n},l.getIdByUrl=function(e){var n=l.urlToId[e]||l.store.urlToId[e]||t;return n},l.getLastSavedState=function(){return l.savedStates[l.savedStates.length-1]||t},l.getLastStoredState=function(){return l.storedStates[l.storedStates.length-1]||t},l.hasUrlDuplicate=function(e){var t=!1,n=l.extractState(e.url);t=n&&n.id!==e.id;return t},l.storeState=function(e){l.urlToId[e.url]=e.id,l.storedStates.push(l.cloneObject(e));return e},l.isLastSavedState=function(e){var t=!1;if(l.savedStates.length){var n=e.id,r=l.getLastSavedState(),i=r.id;t=n===i}return t},l.saveState=function(e){if(l.isLastSavedState(e))return!1;l.savedStates.push(l.cloneObject(e));return!0},l.getStateByIndex=function(e){var t=null;typeof e=="undefined"?t=l.savedStates[l.savedStates.length-1]:e<0?t=l.savedStates[l.savedStates.length+e]:t=l.savedStates[e];return t},l.getHash=function(){var e=l.unescapeHash(r.location.hash);return e},l.unescapeString=function(t){var n=t,r;for(;;){r=e.unescape(n);if(r===n)break;n=r}return n},l.unescapeHash=function(e){var t=l.normalizeHash(e);t=l.unescapeString(t);return t},l.normalizeHash=function(e){var t=e.replace(/[^#]*#/,"").replace(/#.*/,"");return t},l.setHash=function(e,t){if(t!==!1&&l.busy()){l.pushQueue({scope:l,callback:l.setHash,args:arguments,queue:t});return!1}var n=l.escapeHash(e);l.busy(!0);var i=l.extractState(e,!0);if(i&&!l.emulated.pushState)l.pushState(i.data,i.title,i.url,!1);else if(r.location.hash!==n)if(l.bugs.setHash){var s=l.getPageUrl();l.pushState(null,null,s+"#"+n,!1)}else r.location.hash=n;return l},l.escapeHash=function(t){var n=l.normalizeHash(t);n=e.escape(n),l.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?"));return n},l.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");t=l.unescapeHash(t);return t},l.setTitle=function(e){var t=e.title;if(!t){var n=l.getStateByIndex(0);n&&n.url===e.url&&(t=n.title||l.options.initialTitle)}try{r.getElementsByTagName("title")[0].innerHTML=t.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(i){}r.title=t;return l},l.queues=[],l.busy=function(e){typeof e!="undefined"?l.busy.flag=e:typeof l.busy.flag=="undefined"&&(l.busy.flag=!1);if(!l.busy.flag){u(l.busy.timeout);var t=function(){if(!l.busy.flag)for(var e=l.queues.length-1;e>=0;--e){var n=l.queues[e];if(n.length===0)continue;var r=n.shift();l.fireQueueItem(r),l.busy.timeout=o(t,l.options.busyDelay)}};l.busy.timeout=o(t,l.options.busyDelay)}return l.busy.flag},l.fireQueueItem=function(e){return e.callback.apply(e.scope||l,e.args||[])},l.pushQueue=function(e){l.queues[e.queue||0]=l.queues[e.queue||0]||[],l.queues[e.queue||0].push(e);return l},l.queue=function(e,t){typeof e=="function"&&(e={callback:e}),typeof t!="undefined"&&(e.queue=t),l.busy()?l.pushQueue(e):l.fireQueueItem(e);return l},l.clearQueue=function(){l.busy.flag=!1,l.queues=[];return l},l.stateChanged=!1,l.doubleChecker=!1,l.doubleCheckComplete=function(){l.stateChanged=!0,l.doubleCheckClear();return l},l.doubleCheckClear=function(){l.doubleChecker&&(u(l.doubleChecker),l.doubleChecker=!1);return l},l.doubleCheck=function(e){l.stateChanged=!1,l.doubleCheckClear(),l.bugs.ieDoubleCheck&&(l.doubleChecker=o(function(){l.doubleCheckClear(),l.stateChanged||e();return!0},l.options.doubleCheckInterval));return l},l.safariStatePoll=function(){var t=l.extractState(r.location.href),n;if(!l.isLastSavedState(t)){n=t;n||(n=l.createStateObject()),l.Adapter.trigger(e,"popstate");return l}return},l.back=function(e){if(e!==!1&&l.busy()){l.pushQueue({scope:l,callback:l.back,args:arguments,queue:e});return!1}l.busy(!0),l.doubleCheck(function(){l.back(!1)}),c.go(-1);return!0},l.forward=function(e){if(e!==!1&&l.busy()){l.pushQueue({scope:l,callback:l.forward,args:arguments,queue:e});return!1}l.busy(!0),l.doubleCheck(function(){l.forward(!1)}),c.go(1);return!0},l.go=function(e,t){var n;if(e>0)for(n=1;n<=e;++n)l.forward(t);else{if(!(e<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)l.back(t)}return l},l.saveState(l.storeState(l.extractState(r.location.href,!0))),s&&(l.onUnload=function(){var e=s.store("History.store")||{},t;e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in l.idToState){if(!l.idToState.hasOwnProperty(t))continue;e.idToState[t]=l.idToState[t]}for(t in l.urlToId){if(!l.urlToId.hasOwnProperty(t))continue;e.urlToId[t]=l.urlToId[t]}for(t in l.stateToId){if(!l.stateToId.hasOwnProperty(t))continue;e.stateToId[t]=l.stateToId[t]}l.store=e,s.store("History.store",e)},a(l.onUnload,l.options.storeInterval),l.Adapter.bind(e,"beforeunload",l.onUnload),l.Adapter.bind(e,"unload",l.onUnload));if(l.emulated.pushState){var p=function(){};l.pushState=l.pushState||p,l.replaceState=l.replaceState||p}else{l.onPopState=function(t){l.doubleCheckComplete();var n=l.getHash();if(n){var i=l.extractState(n||r.location.href,!0);i?l.replaceState(i.data,i.title,i.url,!1):(l.Adapter.trigger(e,"anchorchange"),l.busy(!1)),l.expectedStateId=!1;return!1}var s=!1;t=t||{},typeof t.state=="undefined"&&(typeof t.originalEvent!="undefined"&&typeof t.originalEvent.state!="undefined"?t.state=t.originalEvent.state||!1:typeof t.event!="undefined"&&typeof t.event.state!="undefined"&&(t.state=t.event.state||!1)),t.state=t.state||!1,t.state?s=l.getStateById(t.state):l.expectedStateId?s=l.getStateById(l.expectedStateId):s=l.extractState(r.location.href),s||(s=l.createStateObject(null,null,r.location.href)),l.expectedStateId=!1;if(l.isLastSavedState(s)){l.busy(!1);return!1}l.storeState(s),l.saveState(s),l.setTitle(s),l.Adapter.trigger(e,"statechange"),l.busy(!1);return!0},l.Adapter.bind(e,"popstate",l.onPopState),l.pushState=function(t,n,r,i){if(l.getHashByUrl(r)&&l.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(i!==!1&&l.busy()){l.pushQueue({scope:l,callback:l.pushState,args:arguments,queue:i});return!1}l.busy(!0);var s=l.createStateObject(t,n,r);l.isLastSavedState(s)?l.busy(!1):(l.storeState(s),l.expectedStateId=s.id,c.pushState(s.id,s.title,s.url),l.Adapter.trigger(e,"popstate"));return!0},l.replaceState=function(t,n,r,i){if(l.getHashByUrl(r)&&l.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(i!==!1&&l.busy()){l.pushQueue({scope:l,callback:l.replaceState,args:arguments,queue:i});return!1}l.busy(!0);var s=l.createStateObject(t,n,r);l.isLastSavedState(s)?l.busy(!1):(l.storeState(s),l.expectedStateId=s.id,c.replaceState(s.id,s.title,s.url),l.Adapter.trigger(e,"popstate"));return!0},l.bugs.safariPoll&&a(l.safariStatePoll,l.options.safariPollInterval);if(i.vendor==="Apple Computer, Inc."||(i.appCodeName||"")==="Mozilla")l.Adapter.bind(e,"hashchange",function(){l.Adapter.trigger(e,"popstate")}),l.getHash()&&l.Adapter.onDomLoad(function(){l.Adapter.trigger(e,"hashchange")})}},l.init()})(window);(function(e,t){"use strict";var n=e.document,r=e.setTimeout||r,i=e.clearTimeout||i,s=e.setInterval||s,o=e.History=e.History||{};if(typeof o.initHtml4!="undefined")throw new Error("History.js HTML4 Support has already been loaded...");o.initHtml4=function(){if(typeof o.initHtml4.initialized!="undefined")return!1;o.initHtml4.initialized=!0;o.enabled=!0;o.savedHashes=[];o.isLastHash=function(e){var t=o.getHashByIndex(),n=e===t;return n};o.saveHash=function(e){if(o.isLastHash(e))return!1;o.savedHashes.push(e);return!0};o.getHashByIndex=function(e){var t=null;typeof e=="undefined"?t=o.savedHashes[o.savedHashes.length-1]:e<0?t=o.savedHashes[o.savedHashes.length+e]:t=o.savedHashes[e];return t};o.discardedHashes={};o.discardedStates={};o.discardState=function(e,t,n){var r=o.getHashByState(e),i={discardedState:e,backState:n,forwardState:t};o.discardedStates[r]=i;return!0};o.discardHash=function(e,t,n){var r={discardedHash:e,backState:n,forwardState:t};o.discardedHashes[e]=r;return!0};o.discardedState=function(e){var t=o.getHashByState(e),n=o.discardedStates[t]||!1;return n};o.discardedHash=function(e){var t=o.discardedHashes[e]||!1;return t};o.recycleState=function(e){var t=o.getHashByState(e);o.discardedState(e)&&delete o.discardedStates[t];return!0};if(o.emulated.hashChange){o.hashChangeInit=function(){o.checkerFunction=null;var t="";if(o.isInternetExplorer()){var r="historyjs-iframe",i=n.createElement("iframe");i.setAttribute("id",r);i.style.display="none";n.body.appendChild(i);i.contentWindow.document.open();i.contentWindow.document.close();var u="",a=!1;o.checkerFunction=function(){if(a)return!1;a=!0;var n=o.getHash()||"",r=o.unescapeHash(i.contentWindow.document.location.hash)||"";if(n!==t){t=n;if(r!==n){u=r=n;i.contentWindow.document.open();i.contentWindow.document.close();i.contentWindow.document.location.hash=o.escapeHash(n)}o.Adapter.trigger(e,"hashchange")}else if(r!==u){u=r;o.setHash(r,!1)}a=!1;return!0}}else o.checkerFunction=function(){var n=o.getHash();if(n!==t){t=n;o.Adapter.trigger(e,"hashchange")}return!0};o.intervalList.push(s(o.checkerFunction,o.options.hashChangeInterval));return!0};o.Adapter.onDomLoad(o.hashChangeInit)}if(o.emulated.pushState){o.onHashChange=function(t){var r=t&&t.newURL||n.location.href,i=o.getHashByUrl(r),s=null,u=null,a=null;if(o.isLastHash(i)){o.busy(!1);return!1}o.doubleCheckComplete();o.saveHash(i);if(i&&o.isTraditionalAnchor(i)){o.Adapter.trigger(e,"anchorchange");o.busy(!1);return!1}s=o.extractState(o.getFullUrl(i||n.location.href,!1),!0);if(o.isLastSavedState(s)){o.busy(!1);return!1}u=o.getHashByState(s);var f=o.discardedState(s);if(f){o.getHashByIndex(-2)===o.getHashByState(f.forwardState)?o.back(!1):o.forward(!1);return!1}o.pushState(s.data,s.title,s.url,!1);return!0};o.Adapter.bind(e,"hashchange",o.onHashChange);o.pushState=function(t,r,i,s){if(o.getHashByUrl(i))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(s!==!1&&o.busy()){o.pushQueue({scope:o,callback:o.pushState,args:arguments,queue:s});return!1}o.busy(!0);var u=o.createStateObject(t,r,i),a=o.getHashByState(u),f=o.getState(!1),l=o.getHashByState(f),c=o.getHash();o.storeState(u);o.expectedStateId=u.id;o.recycleState(u);o.setTitle(u);if(a===l){o.busy(!1);return!1}if(a!==c&&a!==o.getShortUrl(n.location.href)){o.setHash(a,!1);return!1}o.saveState(u);o.Adapter.trigger(e,"statechange");o.busy(!1);return!0};o.replaceState=function(e,t,n,r){if(o.getHashByUrl(
n))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(r!==!1&&o.busy()){o.pushQueue({scope:o,callback:o.replaceState,args:arguments,queue:r});return!1}o.busy(!0);var i=o.createStateObject(e,t,n),s=o.getState(!1),u=o.getStateByIndex(-2);o.discardState(s,i,u);o.pushState(i.data,i.title,i.url,!1);return!0};o.getHash()&&!o.emulated.hashChange&&o.Adapter.onDomLoad(function(){o.Adapter.trigger(e,"hashchange")})}};o.init()})(window);(function(e){e.fn.sap=function(t){var n={className:"sappy",distanceFromTheTop:0,top:""};t=e.extend(n,t);var r=e(this);if(!r.length)return;var i=r.offset().top,s=r.css("position"),o=r.width()+"px",u=e('<div class="sap-shimy-shim"></div>'),a=e(window),f=e(document);a.scroll(function(){var e=a.scrollTop();if(e+t.distanceFromTheTop+r.height()<f.height()-a.height()&&e+t.distanceFromTheTop>r.offset().top){r.css({position:"fixed",width:t.width?t.width:o,top:t.distanceFromTheTop+"px"}).addClass(t.className);u.css({width:o,height:r.height()});r.before(u)}else if(e+t.distanceFromTheTop<i){u.remove();r.css({position:s,width:t.width?t.width:o,top:""}).removeClass(t.className)}})}})(jQuery);(function(e){"use strict";if(!!(e.document.createElement("picture")&&e.document.createElement("source")&&e.HTMLPictureElement))return;e.picturefill=function(){var t=e.document.getElementsByTagName("picture");for(var n=0,r=t.length;n<r;n++){var i=t[n].getElementsByTagName("source"),s=[];if(!i.length){var o=t[n].innerHTML,u=e.document.createElement("div"),a=o.replace(/(<)source([^>]+>)/gmi,"$1div$2").match(/<div[^>]+>/gmi);u.innerHTML=a.join("");i=u.getElementsByTagName("div")}for(var f=0,l=i.length;f<l;f++){var c=i[f].getAttribute("media");(!c||e.matchMedia&&e.matchMedia(c).matches)&&s.push(i[f])}if(s.length){var h=t[n].getElementsByTagName("img")[0];if(!h){h=e.document.createElement("img");h.alt=t[n].getAttribute("alt");t[n].appendChild(h)}h.src=s.pop().getAttribute("src")}}};if(e.addEventListener){e.addEventListener("resize",e.picturefill,!1);e.addEventListener("DOMContentLoaded",function(){e.picturefill();e.removeEventListener("load",e.picturefill,!1)},!1);e.addEventListener("load",e.picturefill,!1)}else e.attachEvent&&e.attachEvent("onload",e.picturefill)})(this);window.TS={};window.Modernizr=window.Modernizr||{};window.Modernizr.addTest("cssmask",Modernizr.testAllProps("mask"));(function(ns,$,Modernizr,window){$(document).ready(function(){!window.prettyPrint||window.prettyPrint();$("#header .social a").twipsy({placement:"below",offset:5});$("[data-twipsy]").each(function(){$(this).twipsy({placement:$(this).data("tooltip-align")||"above",offset:$(this).data("tooltip-offset")||0})});if(Modernizr.mq("screen and (min-width: 57em)")&&!Modernizr.touch){$(".project-nav-container").hoverIntent({sensitivity:30,over:function(e){$(this).stop().animate({height:$(".container",this).outerHeight()},"fast")},out:function(e){$(this).stop().animate({height:"2.5em"},"fast")}}).sap({width:"100%",distanceFromTheTop:$("#header .bar").height()});$("#header .bar").sap({width:"100%"})}ns.history=ns.History();ns.project=ns.Project();ns.history.init();ns.project.init()});ns.Project=function(){function t(){e.title=$("article header h1").first().text();e.contHeight=$(e.container).height();e.total=$("[data-action]",e.nav).length;e.current=$("li.active",e.nav).index();e.$loader=$('<div class="'+e.loader.slice(1)+'" />').appendTo("article header").hide();$("li."+e.activeClass,e.nav).removeClass(e.activeClass).children("a").addClass(e.activeClass)}function n(){$("body").delegate(e.nav+" a","click",function(e){o(this);e.preventDefault()});$(window).keyup(function(e){switch(e.keyCode){case 37:s();break;case 39:i()}})}function r(){e.currentID=$(".display",e.container).data("id");ns.history.replace({id:e.currentID,title:$(".title",e.container).text(),desc:$(".description",e.container).html(),html:$(".display",e.container).html()},window.title,window.location.href);ns.history.bind("statechange",function(){var e=ns.history.getState();_.isEmpty(e.data)||a(e.data)})}function i(){var t=e.current+1<e.total?e.current+1:0;o($("li:eq("+t+")",e.nav).children("a").first())}function s(){var t=e.current-1>=0?e.current-1:e.total-1;o($("li:eq("+t+")",e.nav).children("a").first())}function o(t){if(typeof t!="object")return!1;if($(t).data("id")==e.currentID)return!1;$.ajax({data:{action:$(t).data("action"),id:$(t).data("id"),href:$(t).data("href")},success:function(e){u(e,t)}})}function u(e,t){!e.error&&parseInt(e)!=-1?ns.history.push(e,ns.history.formatTitle(e.title),$(t).prop("href")):console.log(e)}function a(t){f(t);c(t.id,e.currentID)}function f(t){$(e.container).parent().height(e.contHeight).end().fadeOut(e.speed,function(){$(this).html(e.tmpl(t));$("img",this).length&&!$("img",this).prop("complete")?$("img",this).last().load(function(e){l()}):l()})}function l(){e.contHeight=$(e.container).css("visibility","hidden").show().height();e.$loader.fadeOut("fast");$(e.container).hide().css("visibility","inherit").parent().animate({height:e.contHeight},e.speed).end().fadeIn(Math.round(e.speed*.8,0));$(e.navContainer).trigger("mouseout")}function c(t,n){h(n).removeClass(e.activeClass);h(t).addClass(e.activeClass);e.current=h(t).parent().index();e.currentID=t}function h(t){return $(e.nav).find('a[data-id="'+t+'"]')}function p(){$.ajaxSetup({url:e.ajaxurl,timeout:4e3,type:"GET",dataType:"json"});$(e.container).ajaxError(d).ajaxComplete(v).ajaxSuccess(m).ajaxStart(g).ajaxStop(y)}function d(e,t,n,r){}function v(e,t,n){}function m(e,t,n){}function g(){e.$loader.fadeIn("fast")}function y(){}var e={title:"",ajaxurl:"/wp-admin/admin-ajax.php",loader:".loader",isAccessible:!0,accessibleAttr:"left",nav:"#project-nav",navContainer:".project-nav-container",container:"#playpen",display:".display",details:".details",desc:".description",tmpl:_.template($("#proj-tmpl").html()||""),speed:250,current:0,currentID:0,total:0,activeClass:"active"};return{init:function(i){$.extend(e,i);if($(e.container).length){t();p();n();r()}}}};ns.History=function(){function formatTitle(e){return e+" | "+v.title}var v={history:null,title:""};return{bind:function(e,t){return v.history.Adapter.bind(window,e,t)},getState:function(){return v.history.getState()},push:function(e,t,n){v.history.pushState(e,t,n);!window._gaq||_gaq.push(["_trackPageview"])},replace:function(e,t,n){v.history.replaceState(e,t,n)},back:function(){v.history.back()},go:function(e){v.history.go(e)},get:function(item){return eval("v."+item)},formatTitle:function(e){return formatTitle(e)},init:function(){v.history=window.History;v.title=document.title}}}})(window.TS,jQuery,window.Modernizr,window);